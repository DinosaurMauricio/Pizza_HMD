version: "3.1"
stories:
- story: greeting
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - checkpoint: started_greeting

- story: start pizza order vague
  steps:
  - checkpoint: started_greeting
  - intent: init_request
  - action: utter_init_request

- story: order pizza
  steps:
  - intent: item_start_generic
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
  #- slot_was_set:
  #  - pizza_type: Pepperoni
  - slot_was_set:
    - requested_slot: pizza_amount
  #- slot_was_set:
  #  - pizza_amount: three
  - slot_was_set:
    - requested_slot: pizza_size
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_summarize_pizza_order

- story: change the pizza order
  steps:
  - action: utter_summarize_pizza_order
  - intent: pizza_order_confirm_negative
  - action: utter_pizza_order_confirm_negative
  - checkpoint: change_pizza_order

- story: change order + confirm order
  steps:
  - checkpoint: change_pizza_order
  - intent: item_change
    entities:
      - pizza_type: "Pepperoni"
      - pizza_size: "Small"
      - pizza_amount: "Three"
  - action: action_change_order
  - action: utter_item_change
  - intent: pizza_order_confirm_positive
  - action: action_pizza_order_add
  - action: utter_pizza_order_confirm_positive

- story: finish order
  steps:
  - action: action_total_order
  - action: utter_summarize_complete_order
  - intent: complete_order_confirm
  - action: utter_name_phone

- story:  accept pizza and utter the complete order
  steps:
  - action: action_pizza_order_add
  - action: utter_pizza_order_confirm_positive
  - intent: response_negative
  - action: action_total_order
  - action: utter_summarize_complete_order
  - intent: complete_order_confirm

- story: get details customer details
  steps:
  - action: action_total_order
  - action: utter_summarize_complete_order
  - intent: complete_order_confirm
  - action: utter_name_phone

- story: order delivery
  steps:
  - intent: order_delivery
  - action: utter_delivery_address

- story: order add side dish
  steps:
  - intent: order_side_dish
    entities:
    - side_dish: "Caprese Salad"
  - action: action_add_side_dish
  - action: utter_side_dishes_order

- story: question on side dish menu + add side dish
  steps:
  - intent: ask_for_side_dish_options
  - action: utter_ask_for_side_dish_options
  - intent: order_side_dish
    entities:
    - side_dish: "French fries"
  - action: action_add_side_dish
  - action: utter_side_dishes_order

- story: repeat side dish menu + add side
  steps:
  - intent: ask_for_side_dish_options
  - action: utter_ask_for_side_dish_options
  - intent: repeat_side_dish_menu
  - action: utter_repeat_side_dish_menu
  - intent: order_side_dish
    entities:
    - side_dish: "Chicken wings"
  - action: action_add_side_dish
  - action: utter_side_dishes_order

- story: remove side dish from order
  steps:
  - intent: remove_side_dish
    entities:
    - side_dish: "French fries"
  - action: action_remove_side_dish
  - action: utter_side_dishes_order

- story: add and remove side dish from order
  steps:
  - intent: ask_for_side_dish_options
  - action: utter_ask_for_side_dish_options
  - intent: repeat_side_dish_menu
  - action: utter_repeat_side_dish_menu
  - intent: order_side_dish
    entities:
    - side_dish: "Chicken wings"
  - action: action_add_side_dish
  - action: utter_side_dishes_order
  - intent: remove_side_dish
    entities:
    - side_dish: "Chicken wings"
  - action: action_remove_side_dish
  - action: utter_side_dishes_order

- story: cancel side dish + repeat side dish menu
  steps:
  - intent: ask_for_side_dish_options
  - action: utter_ask_for_side_dish_options
  - intent: repeat_side_dish_menu
  - action: utter_repeat_side_dish_menu
  - intent: cancel_side_dish
  - action: action_remove_all_side_dishes
  - action: utter_cancel_side_dish

- story: cancel side dish order
  steps:
  - intent: ask_for_side_dish_options
  - action: utter_ask_for_side_dish_options
  - intent: cancel_side_dish
  - action: action_remove_all_side_dishes
  - action: utter_cancel_side_dish

- story: ask for promotions
  steps:
  - intent: promotions_faq
  - action: utter_promotions_faq
  - intent: order_promotion
    entities:
    - promotion_type: "Duo Party"

# TODO: might have to improve this stories
- story: vague recommend promotion veggie feast
  steps:
  - intent: order_promotion_vague
    entities:
    - is_vegetarian: 'True'
  - slot_was_set:
    - is_vegetarian: 'True'
  - action: action_recommend_promotion
  - slot_was_set:
    - promotion_type: Veggie Feast

- story: vague recommend promotion duo party
  steps:
  - intent: order_promotion_vague
    entities:
    - is_reunion: 'True'
  - slot_was_set:
    - is_reunion: 'True'
  - action: action_recommend_promotion
  - slot_was_set:
    - promotion_type: Duo Party

- story: duo party form
  steps:
  - intent: promotion_order_confirm
  - action: action_recommend_on_promotion_form
  - action: duo_party_form
  - active_loop: duo_party_form
  - slot_was_set:
    - requested_slot: first_pizza_promotion
#  #- slot_was_set:
#  #  - pizza_type: Pepperoni
  - slot_was_set:
    - requested_slot: second_pizza_promotion
#  #- slot_was_set:
#  #  - pizza_amount: three
  - slot_was_set:
    - requested_slot: first_side_dish_promotion
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_finish_promotion #TODO: change this to a proper utterance

#- story: confirm promotion ordering 
#  steps:
#  - intent: promotion_order_confirm
#  - action: action_handle_promotion_order_confirm
#  - action: utter_promotion_order_confirm


#possible story
#- story: vague recommend undecided and ask questions
#  steps:
#  - intent: order_promotion_vague
#    entities:
#    - is_vegetarian: null
#    - is_reunion: null
#  - action: utter_vague_order_promotion
#  - intent: promotions_faq
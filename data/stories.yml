version: "3.1"
stories:
- story: greeting
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - checkpoint: started_greeting

- story: start pizza order vague
  steps:
  - checkpoint: started_greeting
  - intent: init_request
  - action: utter_init_request
  - checkpoint: start_order

- story: confirm the pizza order
  steps:
  - action: utter_summarize_order
  - intent: order_confirm_positive
  - action: utter_order_confirm_positive

- story: change the pizza order
  steps:
  - action: utter_summarize_order
  - intent: order_confirm_negative
  - action: utter_order_confirm_negative
  - checkpoint: change_pizza_order

- story: change order
  steps:
  - checkpoint: change_pizza_order
  - intent: item_change
    entities:
      - pizza_type: "Pepperoni"
      - pizza_size: "Small"
      - pizza_amount: "three"
  - action: action_change_order
  - action: utter_item_change

- story: cancel pizza order change and confirm order
  steps:
  - checkpoint: change_pizza_order
  - intent: cancel_item_change
  - action: utter_cancel_item_change
  - intent: order_confirm_positive
  - action: utter_order_confirm_positive
    

#
#- story: order pizza precise
#  steps:
#  - checkpoint: new_order
#  - intent: item_start_generic
#  - action: pizza_order_form
#  - active_loop: pizza_order_form
#  - checkpoint: confirm_order

#
### WARNING: THIS IS THE BROKEN STORY
##- story: story_to_proceed_furthur
##  steps:
##  - checkpoint: confirm_order
##  - intent: response_positive # if remove comment it should change to order_confirm_positive
##  - action: action_pizza_order_add
##  - action: utter_extra_order
##  - checkpoint: confirmed_order_proceed
#
##- story: story_to_add_new_order
##  steps:
##  - checkpoint: confirmed_order_proceed
##  - intent: order_confirm_positive
##  - action: action_reset_pizza_form
##  - action: utter_order_add
##  - checkpoint: new_order
#
##- story: story_to_proceed_with_confirm_order
##  steps:
##  - checkpoint: confirmed_order_proceed
##  - intent: response_negative
##  - action: utter_name_phone
##  - intent: response_name_phone
##  - action: action_order_number
##  - action: utter_total_order_final
##  - checkpoint: order_proceed
#
##- story: order take home
##  steps:
##  - checkpoint: order_proceed
##  - intent: order_take_home
##  - action: utter_order_complete
##
##- story: order delivery
##  steps:
##  - checkpoint: order_proceed
##  - intent: order_delivery
##  - action: utter_delivery_address
##  - intent: order_delivery_address
##  - action: utter_order_complete
#
#- story: story_modify_prerequest
#  steps:
#  - checkpoint: confirm_order_pre_question
#  - intent: item_change_request_without_entity
#  - action: utter_item_type
#  - checkpoint: confirm_order
#
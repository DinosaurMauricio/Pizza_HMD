version: "3.1"
stories:
- story: greeting
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - checkpoint: started_greeting

- story: start pizza order vague
  steps:
  - checkpoint: started_greeting
  - intent: init_request
  - action: utter_init_request

- story: confirm the pizza order
  steps:
  - action: utter_summarize_order
  - intent: order_confirm_positive
  - action: utter_order_confirm_positive
  - checkpoint: completed_order

- story: change the pizza order
  steps:
  - action: utter_summarize_order
  - intent: order_confirm_negative
  - action: utter_order_confirm_negative
  - checkpoint: change_pizza_order

#- story: change order
#  steps:
#  - checkpoint: change_pizza_order
#  - intent: item_change
#    entities:
#      - pizza_type: "Pepperoni"
#      - pizza_size: "Small"
#      - pizza_amount: "three"
#  - action: action_change_order
#  - action: utter_item_change
#  - checkpoint: completed_order
#
- story: cancel pizza order change and confirm order
  steps:
  - checkpoint: change_pizza_order
  - intent: cancel_item_change
  - action: utter_cancel_item_change
  - intent: order_confirm_positive # here issue lol
  - checkpoint: completed_order

- story: complete order + get details
  steps:
  #- checkpoint: completed_order
  - intent: response_negative
  - action: action_total_order
  - action: utter_name_phone
  - intent: response_name_phone
    entities:
    - client_name: "Mauricio"
    - phone_number: "3331112222"
  - action: utter_order_takeout
  - checkpoint: takeout_preference

- story: order take home
  steps:
  - checkpoint: takeout_preference
  - intent: order_take_home
  - action: utter_order_complete

- story: order delivery
  steps:
  - checkpoint: takeout_preference
  - intent: order_delivery
  - action: utter_delivery_address
  - intent: order_delivery_address
  - action: utter_order_complete


- story: Cancel order change and confirm order
  steps:
  - intent: item_start_generic
    entities:
    - pizza_amount: two
    - pizza_type: Hawaii
    - pizza_size: 12"
  - slot_was_set:
    - pizza_amount: two
  - slot_was_set:
    - pizza_size: 12"
  - slot_was_set:
    - pizza_type: Hawaii
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - pizza_amount: two
  - slot_was_set:
    - pizza_size: 12"
  - slot_was_set:
    - pizza_type: Hawaii
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_summarize_order
  - intent: order_confirm_negative
  - action: utter_item_change
  - action: utter_order_confirm_negative
  - intent: cancel_item_change
  - action: utter_cancel_item_change
  - intent: order_confirm_positive
  - action: action_total_order
  - slot_was_set:
    - total_order: two Hawaii is of 12"
